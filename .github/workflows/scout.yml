name: Daily India Scout

on:
  schedule:
      # Runs every day at 6 AM IST (12:30 AM UTC)
          - cron: '30 0 * * *'
            workflow_dispatch: # Allow manual trigger

            jobs:
              scout:
                  runs-on: ubuntu-latest

                      steps:
                            - name: Checkout repository
                                    uses: actions/checkout@v4

                                          - name: Set up Python
                                                  uses: actions/setup-python@v5
                                                          with:
                                                                    python-version: '3.11'

                                                                          - name: Install dependencies
                                                                                  run: pip install requests

                                                                                        - name: Run India Scout
                                                                                                env:
                                                                                                          GITHUB_TOKEN: ${{ secrets.GH_SCOUT_TOKEN }}
                                                                                                                  run: python scout.py
                                                                                                                  
                                                                                                                        - name: Commit updated data
                                                                                                                                run: |
                                                                                                                                          git config --local user.email "action@github.com"
                                                                                                                                                    git config --local user.name "GitHub Action"
                                                                                                                                                              git add developers.json
                                                                                                                                                                        git diff --staged --quiet || git commit -m "Update developers data - $(date +'%Y-%m-%d')"
                                                                                                                                                                                  git push
